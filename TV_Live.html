<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>  Sunplus  SAT2IP </title>
<style>
    :root {
        --golden-diamond: #bfa14b;
        --silver: #c0c0c0;
        --copper: #b87333;
        --text-color: #333;
        --background-color: #f0f2f5;
        --control-bg: #f9f9f9;
        --border-color: var(--copper);
        --primary-color: var(--golden-diamond);
        --secondary-color: var(--silver);
        --green-screen: #04ff00;
    }
    body {
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
        background-color: var(--background-color);
        color: var(--text-color);
        margin: 0; padding: 10px 15px;
        text-align: center;
        line-height: 1.2;
    }
    h1 {
        color: var(--primary-color);
        font-size: 2.3rem;
        margin: 0 0 10px 0;
        z-index: 1001;
    }
    #videoPlayer {
        position: sticky;
        top: 0;
        width: 100%;
        max-height: 40vh;
        background-color: #000;
        border-radius: 8px;
        margin-bottom: 6px;
        z-index: 1000;
        box-shadow: 0 0 12px var(--golden-diamond);
    }
    /* ÿ¥ÿßÿ¥ÿ© ÿ±ŸÇŸÖ ÿßŸÑŸÇŸÜÿßÿ© - ÿπÿØÿ≥ÿ© ÿßŸÑÿ±ÿ≥ŸäŸÅÿ± */
    #channelDisplay {
        position: sticky;
        top: calc(40vh + 6px);
        background-color: #000;
        color: var(--green-screen);
        font-family: 'Courier New', Courier, monospace;
        font-weight: bold;
        font-size: 1.3rem;
        width: 100px;
        margin: 0 auto 12px auto;
        border-radius: 5px;
        padding: 6px 0;
        box-shadow: 0 0 8px var(--green-screen);
        user-select: none;
        z-index: 1001;
    }
    .channel-controls {
        position: sticky;
        top: calc(40vh + 50px);
        background: var(--control-bg);
        max-width: 900px;
        margin: 0 auto 10px auto;
        padding: 8px 10px;
        border-radius: 10px;
        box-shadow: 0 0 10px var(--copper);
        display: flex;
        flex-direction: column;
        gap: 10px;
        z-index: 999;
    }
    .channel-step-buttons {
        display: flex;
        justify-content: center;
        gap: 8px;
        flex-wrap: nowrap;
        align-items: center;
    }
    .channel-step-buttons.positive,
    .channel-step-buttons.negative {
        justify-content: center;
    }
    .channel-step-buttons.positive button,
    .channel-step-buttons.negative button,
    .channel-step-buttons.volume-button {
        flex: 1 1 16%;
        padding: 8px 0;
        font-size: 1.1rem;
        background-color: var(--secondary-color);
        border: 2px solid var(--copper);
        color: var(--text-color);
        font-weight: bold;
        border-radius: 6px;
        cursor: pointer;
        user-select: none;
        transition: background-color 0.3s ease, color 0.3s ease;
        min-width: 48px;
    }
    .channel-step-buttons.positive button:hover,
    .channel-step-buttons.negative button:hover,
    .channel-step-buttons.volume-button:hover {
        background-color: var(--golden-diamond);
        color: white;
    }
    .channel-step-buttons.volume-button {
        flex: 1 1 12%;
        font-size: 1.2rem;
        padding: 8px 6px;
        max-width: 48px;
    }
    select {
        background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24' fill='none' stroke='%23333' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E");
        background-repeat: no-repeat;
        background-position: left 15px center;
        max-width: 400px;
        width: 100%;
        padding: 6px 12px;
        border-radius: 6px;
        border: 2px solid var(--copper);
        background-color: var(--secondary-color);
        color: var(--text-color);
        cursor: pointer;
        font-weight: bold;
        transition: background-color 0.3s ease;
        margin: 6px auto 0 auto;
        display: block;
        font-size: 1rem;
        height: 32px;
        overflow: hidden;
        line-height: 1.2;
    }
    select:hover, select:focus {
        background-color: var(--golden-diamond);
        color: white;
        outline: none;
        border-color: var(--golden-diamond);
    }
    input[type="text"] {
        width: 80px;
        max-width: 100%;
        padding: 5px 8px;
        border-radius: 6px;
        border: 2px solid var(--copper);
        font-size: 0.85rem;
        text-align: center;
        background-color: var(--secondary-color);
        color: var(--text-color);
        transition: background-color 0.3s ease;
    }
    input[type="text"]:focus {
        background-color: var(--golden-diamond);
        color: white;
        outline: none;
        border-color: var(--golden-diamond);
    }
    #portInput {
        width: 60px;
        max-width: 100%;
    }
    body, button {
        user-select: none;
    }
    button {
        border: none;
    }
    .container {
        max-width: 900px;
        margin: 0 auto;
        padding: 0 15px 120px 15px;
        background-color: var(--control-bg);
        border-radius: 10px;
        box-shadow: 0 3px 15px rgba(0,0,0,0.1);
        display: flex;
        flex-direction: column;
        gap: 8px;
        position: relative;
        z-index: 1;
    }
    .controls-server {
        position: fixed;
        bottom: 0;
        left: 50%;
        transform: translateX(-50%);
        max-width: 900px;
        width: 100%;
        background: var(--control-bg);
        padding: 6px 10px;
        box-shadow: 0 -3px 10px var(--copper);
        border-top: 2px solid var(--copper);
        z-index: 1005;
        font-size: 0.75rem;
        color: var(--text-color);
        display: none;
        flex-wrap: nowrap;
        align-items: center;
        justify-content: flex-start;
        gap: 10px;
    }
    .server-inputs {
        display: flex;
        flex-direction: column;
        gap: 4px;
        min-width: 100px;
    }
    label {
        font-weight: bold;
        white-space: nowrap;
        margin-bottom: 2px;
        text-align: right;
    }
    #updateServerBtn {
        height: 36px;
        padding: 0 12px;
        border-radius: 6px;
        border: 2px solid var(--copper);
        font-weight: bold;
        font-size: 0.85rem;
        background-color: var(--primary-color);
        color: white;
        cursor: pointer;
        user-select: none;
        align-self: flex-end;
        transition: background-color 0.3s ease;
    }
    #updateServerBtn:hover {
        background-color: var(--copper);
    }
    #toggleServerSettings {
        cursor: pointer;
        color: var(--golden-diamond);
        font-weight: bold;
        font-size: 0.9rem;
        margin-bottom: 10px;
        user-select: none;
    }
</style>
</head>
<body>
<div class="container">
    <h1> Sunplus  SAT2IP </h1>

    <video id="videoPlayer" controls autoplay muted playsinline></video>

    <div id="channelDisplay" aria-live="polite" aria-atomic="true">ŸÖÿ®ÿßÿ¥ÿ±</div>

    <select id="channelSelect" aria-label="ÿßÿÆÿ™Ÿäÿßÿ± ÿßŸÑŸÇŸÜÿßÿ©"></select>

    <div class="channel-controls" aria-label="ÿ£ÿ≤ÿ±ÿßÿ± ÿßŸÑÿ™ÿ≠ŸÉŸÖ ÿ®ÿßŸÑŸÇŸÜŸàÿßÿ™">
        <div class="channel-step-buttons positive" aria-label="ÿ≤ŸäÿßÿØÿ© ÿßŸÑŸÇŸÜÿßÿ©">
            <button class="changeChannelBtn" data-step="1">+1</button>
            <button class="changeChannelBtn" data-step="10">+10</button>
            <button class="changeChannelBtn" data-step="20">+20</button>
            <button class="changeChannelBtn" data-step="50">+50</button>
            <button class="changeChannelBtn" data-step="100">+100</button>
            <button class="volume-button" id="volumeUpBtn" aria-label="ÿ±ŸÅÿπ ÿßŸÑÿµŸàÿ™">üîä</button>
        </div>
        <div class="channel-step-buttons negative" aria-label="ŸÜŸÇÿµÿßŸÜ ÿßŸÑŸÇŸÜÿßÿ©">
            <button class="changeChannelBtn" data-step="-1">-1</button>
            <button class="changeChannelBtn" data-step="-10">-10</button>
            <button class="changeChannelBtn" data-step="-20">-20</button>
            <button class="changeChannelBtn" data-step="-50">-50</button>
            <button class="changeChannelBtn" data-step="-100">-100</button>
            <button class="volume-button" id="volumeDownBtn" aria-label="ÿÆŸÅÿ∂ ÿßŸÑÿµŸàÿ™">üîâ</button>
        </div>
    </div>

    <select id="lastChannels" aria-label="ÿ¢ÿÆÿ± Ÿ• ŸÇŸÜŸàÿßÿ™ ÿ™ŸÖ ÿ™ÿ¥ÿ∫ŸäŸÑŸáÿß" title="ÿßÿ∂ÿ∫ÿ∑ ÿπŸÑŸâ ÿ£Ÿä ŸÇŸÜÿßÿ© ŸÑÿ™ÿ¥ÿ∫ŸäŸÑŸáÿß"></select>

    <div id="toggleServerSettings" tabindex="0" role="button" aria-pressed="false" aria-label="ÿπÿ±ÿ∂ ÿ•ÿπÿØÿßÿØÿßÿ™ ÿßŸÑÿ≥Ÿäÿ±ŸÅÿ±">
        ‚öôÔ∏è ÿ™ÿπÿØŸäŸÑ ÿ•ÿπÿØÿßÿØÿßÿ™ ÿßŸÑÿ≥Ÿäÿ±ŸÅÿ±
    </div>
</div>

<div class="controls-server" aria-label="ÿ•ÿπÿØÿßÿØÿßÿ™ ÿßŸÑÿ≥Ÿäÿ±ŸÅÿ±">
    <div class="server-inputs">
        <label for="ipInput">ÿπŸÜŸàÿßŸÜ IP:</label>
        <input type="text" id="ipInput" value="192.168.1.88" placeholder="ÿßÿØÿÆŸÑ IP ŸáŸÜÿß" />
    </div>
    <div class="server-inputs">
        <label for="portInput">ÿßŸÑÿ®Ÿàÿ±ÿ™:</label>
        <input type="text" id="portInput" maxlength="6" value="9891" placeholder="ÿßÿØÿÆŸÑ ÿßŸÑÿ®Ÿàÿ±ÿ™ ŸáŸÜÿß" />
    </div>
    <button id="updateServerBtn" aria-label="ÿ™ÿ≠ÿØŸäÿ´ ÿ•ÿπÿØÿßÿØÿßÿ™ ÿßŸÑÿ≥Ÿäÿ±ŸÅÿ±">ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑÿ≥Ÿäÿ±ŸÅÿ±</button>
</div>

<script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
<script>
    let defaultIP = "192.168.1.88";
    let defaultPort = "9891";
    let channelCount = 2000;

    const video = document.getElementById("videoPlayer");
    const channelSelect = document.getElementById("channelSelect");
    const ipInput = document.getElementById("ipInput");
    const portInput = document.getElementById("portInput");
    const updateServerBtn = document.getElementById("updateServerBtn");
    const volumeUpBtn = document.getElementById("volumeUpBtn");
    const volumeDownBtn = document.getElementById("volumeDownBtn");
    const lastChannelsSelect = document.getElementById("lastChannels");
    const toggleServerSettingsBtn = document.getElementById("toggleServerSettings");
    const controlsServerDiv = document.querySelector(".controls-server");
    const channelDisplay = document.getElementById("channelDisplay");

    let lastChannels = [];

    function updateLastChannels(channelNumber) {
        if(channelNumber === "") channelNumber = "ŸÖÿ®ÿßÿ¥ÿ±";
        else channelNumber = String(channelNumber);
        lastChannels = lastChannels.filter(ch => ch !== channelNumber);
        lastChannels.unshift(channelNumber);
        if(lastChannels.length > 5) lastChannels.pop();

        lastChannelsSelect.innerHTML = "";
        lastChannels.forEach(ch => {
            const option = document.createElement("option");
            option.value = (ch === "ŸÖÿ®ÿßÿ¥ÿ±") ? "" : ch;
            option.textContent = ch;
            lastChannelsSelect.appendChild(option);
        });
    }

    function generateStreamUrl(channelNumber) {
        if(channelNumber === "") 
            return `http://${defaultIP}:${defaultPort}/live`;
        return `http://${defaultIP}:${defaultPort}/live/${channelNumber}`;
    }

    function loadStream(channelNumber) {
        if(channelNumber === null || channelNumber === undefined) return;

        const streamUrl = generateStreamUrl(channelNumber);

        if(window.hls) {
            window.hls.destroy();
            window.hls = null;
        }

        if(Hls.isSupported()) {
            window.hls = new Hls();
            window.hls.loadSource(streamUrl);
            window.hls.attachMedia(video);
            window.hls.on(Hls.Events.MANIFEST_PARSED, () => {
                video.muted = true;
                video.play().catch(()=>{});
            });
        } else if(video.canPlayType("application/vnd.apple.mpegurl")) {
            video.src = streamUrl;
            video.muted = true;
            video.play().catch(()=>{});
        }
        channelSelect.value = channelNumber;
        updateLastChannels(channelNumber);
        channelDisplay.textContent = channelNumber === "" ? "ŸÖÿ®ÿßÿ¥ÿ±" : channelNumber;
    }

    function populateChannels(start, end) {
        for(let i=start; i<=end; i++) {
            const option = document.createElement("option");
            option.value = i;
            option.textContent = `ÿßŸÑŸÇŸÜÿßÿ© ${i}`;
            channelSelect.appendChild(option);
        }
    }

    window.onload = function () {
        const liveOption = document.createElement("option");
        liveOption.value = "";
        liveOption.textContent = "ŸÖÿ®ÿßÿ¥ÿ±";
        channelSelect.appendChild(liveOption);

        populateChannels(1, channelCount);

        channelSelect.value = "";
        loadStream("");
    };

    channelSelect.addEventListener("change", () => {
        loadStream(channelSelect.value);
    });

    lastChannelsSelect.addEventListener("change", () => {
        loadStream(lastChannelsSelect.value);
    });

    toggleServerSettingsBtn.addEventListener("click", () => {
        if(controlsServerDiv.style.display === "flex") {
            controlsServerDiv.style.display = "none";
            toggleServerSettingsBtn.setAttribute("aria-pressed", "false");
        } else {
            controlsServerDiv.style.display = "flex";
            toggleServerSettingsBtn.setAttribute("aria-pressed", "true");
        }
    });

    updateServerBtn.addEventListener("click", () => {
        const ipVal = ipInput.value.trim();
        const portVal = portInput.value.trim();

        if(ipVal) defaultIP = ipVal;
        if(portVal) defaultPort = portVal;

        loadStream(channelSelect.value);
        alert(`ÿ™ŸÖ ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑÿ•ÿπÿØÿßÿØÿßÿ™ ÿ•ŸÑŸâ:\nIP: ${defaultIP}\nPort: ${defaultPort}`);
    });

    document.querySelectorAll(".changeChannelBtn").forEach(btn => {
        btn.addEventListener("click", () => {
            let step = Number(btn.getAttribute("data-step"));
            let current = channelSelect.value === "" ? 0 : Number(channelSelect.value);

            let newChannel = current + step;
            if(newChannel < 1) newChannel = 1;
            if(newChannel > channelCount) newChannel = channelCount;

            loadStream(newChannel);
        });
    });

    volumeUpBtn.addEventListener("click", () => {
        video.volume = Math.min(1, video.volume + 0.1);
    });

    volumeDownBtn.addEventListener("click", () => {
        video.volume = Math.max(0, video.volume - 0.1);
    });
</script>
</body>
</html>